# UR5 实时数据交换

## 实时数据交换

### 1. 监听机器人状态

```python
# 通过端口30003获取实时数据
import socket
import struct

def monitor_robot_state():
    HOST = "192.168.1.100"
    PORT = 30003
    
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect((HOST, PORT))
    
    while True:
        try:
            data = s.recv(1024)
            if len(data) > 0:
                # 解析实时数据包
                parse_robot_data(data)
        except KeyboardInterrupt:
            break
    
    s.close()

def parse_robot_data(data):
    # 解析机器人状态数据
    # 具体解析格式参考客户端接口文档
    print(f"接收到数据长度: {len(data)}")
```

### 2. 位置数据获取

```urscript
# 在UR脚本中获取当前位置
current_pose = get_actual_tcp_pose()
current_joints = get_actual_joint_positions()

# 通过套接字发送位置数据
pose_string = str(current_pose)
joint_string = str(current_joints)

socket_send_string(pose_string, "data_socket")
socket_send_string(joint_string, "data_socket")
```
# UR5机器人TCP/IP通信与高级控制技术文档

本项目提供了基于UR5机器人的完整TCP/IP通信解决方案和高级控制技术文档，包括基础通信、运动控制对比分析以及复杂曲线跟踪技术。

## 📚 文档目录

### 基础通信模块
1. [概述和TCP连接基础](./01_概述和TCP连接基础.md) - 系统概述、端口配置、网络连接测试
2. [套接字通信功能](./02_套接字通信功能.md) - 套接字创建、连接管理、状态检查
3. [客户端服务器通信](./03_客户端服务器通信.md) - 双向通信模式和连接管理
4. [数据读写操作](./04_数据读写操作.md) - 字符串、数值、二进制数据操作
5. [远程控制接口](./05_远程控制接口.md) - 远程命令发送和批量操作

### 核心技术模块
6. [URScript命令参考](./06_URScript命令参考.md) - 完整的URScript命令手册
   - 运动控制命令（movej, movel, movec, servoj, servoc）
   - 输入输出控制
   - 传感器反馈
   - 系统控制命令
   - 数学与坐标变换
   - 命令速查表和代码模板

7. [实时数据交换](./07_实时数据交换.md) - 实时状态监控和数据获取
8. [错误处理与调试](./08_错误处理与调试.md) - 异常处理和系统调试
9. [实际应用示例](./09_实际应用示例.md) - 视觉集成、PLC通信、数据记录
10. [最佳实践](./10_最佳实践.md) - 连接管理、性能优化、安全考虑

### 高级技术分析
- [Move方式与Servo方式对比分析](./Move方式与Servo方式对比分析.md) - 两种控制方式的详细对比
- [机械臂未知曲线跟踪与切线控制技术](./机械臂未知曲线跟踪与切线控制技术.md) - 高级曲线跟踪技术

## 🎯 主要特性

### TCP/IP通信能力
- ✅ 多端口通信支持（30001-30004, 29999）
- ✅ 实时数据交换（125Hz/500Hz）
- ✅ 可靠的连接管理和错误处理
- ✅ 多种数据格式支持

### 运动控制技术
- ✅ **Move方式**：标准轨迹规划，适合预定义路径
- ✅ **Servo方式**：实时控制，支持外部反馈集成
- ✅ 混合控制策略，平衡效率和精度

### 高级应用技术
- ✅ 未知曲线实时检测与跟踪
- ✅ TCP切线姿态实时控制
- ✅ 多传感器融合（视觉+力觉+位置）
- ✅ 预测性控制算法

## 🚀 技术指标

| 性能指标 | 数值 | 说明 |
|---------|------|------|
| 控制频率 | 125Hz | Servo模式实时控制 |
| 位置精度 | ±0.1mm | 曲线跟踪精度 |
| 姿态精度 | ±1° | 切线对齐精度 |
| 响应延迟 | <10ms | 系统响应时间 |
| 跟踪速度 | 5-50mm/s | 可调节范围 |

## 📋 应用场景

### 标准工业应用
- 🔧 **装配作业** - 精密零件装配
- 📦 **搬运码垛** - 自动化物流
- ⚡ **焊接** - 预定义路径焊接
- 🎨 **喷涂** - 标准轮廓涂装

### 高级控制应用
- 🔍 **视觉引导** - 动态目标跟踪
- 💪 **力控制** - 精密装配和抛光
- 📏 **曲线跟踪** - 复杂轮廓加工
- 🤖 **智能适应** - 环境自适应控制

## 🛠️ 技术架构

```
┌─────────────────────────────────────────────────────────┐
│                    应用层                                │
├─────────────────────────────────────────────────────────┤
│  视觉系统  │  力控制  │  轨迹规划  │  姿态控制        │
├─────────────────────────────────────────────────────────┤
│            通信中间件 (TCP/IP)                           │
├─────────────────────────────────────────────────────────┤
│  Move控制  │  Servo控制  │  I/O控制  │  传感器接口    │
├─────────────────────────────────────────────────────────┤
│                  UR机器人控制器                          │
└─────────────────────────────────────────────────────────┘
```

## 💻 代码示例

### 基础TCP/IP通信
```python
import socket

def send_ur_command(command):
    HOST = "192.168.1.100"
    PORT = 30002
    
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect((HOST, PORT))
    s.send((command + "\n").encode())
    s.close()

# 发送运动命令
send_ur_command("movej([-1.95, -1.58, 1.16, -1.15, -1.55, 1.18], a=1.0, v=0.1)")
```

### Servo实时控制
```urscript
# 实时曲线跟踪控制
def curve_tracking_control():
    while tracking_active:
        current_pose = get_actual_tcp_pose()
        target_point, tangent_direction = get_path_target(current_pose)
        target_orientation = calculate_target_orientation(tangent_direction)
        
        target_pose = p[target_point[0], target_point[1], target_point[2],
                       target_orientation[0], target_orientation[1], target_orientation[2]]
        
        servoc(target_pose)
        sleep(0.008)  # 125Hz控制频率
    end
end
```

## 📖 快速开始

1. **环境准备**
   - UR5机器人及控制器
   - 网络连接配置
   - Python开发环境

2. **基础通信测试**
   ```bash
   # 测试网络连接
   ping 192.168.1.100
   
   # 运行基础通信示例
   python basic_communication.py
   ```

3. **高级功能开发**
   - 参考各模块文档
   - 使用提供的代码模板
   - 根据应用需求定制参数

## 🔧 开发工具

- **UR Simulator** - 机器人仿真环境
- **Python 3.7+** - 主控制程序开发
- **OpenCV** - 视觉处理（可选）
- **NumPy/SciPy** - 数学计算
- **Socket编程** - 网络通信

## ⚠️ 安全注意事项

1. **工作空间限制** - 设置合理的运动边界
2. **速度限制** - 根据应用场景设置安全速度
3. **力限制** - 配置接触力阈值
4. **紧急停止** - 实现可靠的急停机制
5. **通信监控** - 监控网络连接状态

## 📝 版本历史

- **v1.0.0** - 初始版本发布
  - 完整的TCP/IP通信文档
  - Move vs Servo对比分析
  - 高级曲线跟踪技术

## 🤝 贡献指南

欢迎提交问题报告和改进建议：
1. Fork本项目
2. 创建特性分支
3. 提交更改
4. 发起Pull Request

## 📄 许可证

本项目采用MIT许可证 - 详见 [LICENSE](LICENSE) 文件

## 📧 联系方式

如有技术问题或合作需求，请通过以下方式联系：
- 技术支持：[技术支持邮箱]
- 项目维护：[维护者信息]

---

**注意**：本文档基于UR机器人scriptManual_3.15.4版本编写，请确保您的机器人固件版本兼容。

**免责声明**：请在充分理解机器人安全操作规程的前提下使用本文档中的代码和技术方案。